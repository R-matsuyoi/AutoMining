20220309-14:34:57  加载训练结果：./binaryclassify/eg/traintest~202011~202012/train_result~202011~202012.pkl
20220309-14:34:57  从训练结果中获取Info,并加入预测所需信息

20220309-14:34:57  condition中涉及日数据，接下来的预测过程不得不暂时忽略日数据条件
20220309-14:34:57  务必通知清单输出人员在输出清单时补充这些条件
20220309-14:34:57  确认忽略日数据条件，不会造成数据量的异常突增
20220309-14:34:57  检查剔除前后的逻辑确保可通过在清单输出时补充日数据条件以得到预期用户范围的清单

20220309-14:34:57  --- table_day从ml.ml_feature_info_yw_user_day,  acct_day, 1, 15修改为np.nan
20220309-14:34:57  --- 剔除condition_base中的日数据条件
                   原始：
                   
                       phone_no_null is null and
                       dayvalue_phone_no_null is null and
                       last_stop_date is not null and
                       innet_months >= 3
                   剔除后：
                   phone_no_null is null and
                    last_stop_date is not null and
                    innet_months >= 3

20220309-14:34:57  --- 剔除condition中的日数据条件
                   原始：
                   dayvalue_user_status='在网-正常' and 
                       phone_no_null is null and
                       dayvalue_phone_no_null is null and
                       last_stop_date is not null and
                       innet_months >= 3
                   剔除后：
                   phone_no_null is null and
                    last_stop_date is not null and
                    innet_months >= 3


                   ###################################################################### 加工预测账期近n月基础数据
                    


20220309-14:34:57  将数据拆分成 4 份分别预测

20220309-14:34:57  =========================================== 0份：[0, 1, 2] ==========================================
20220309-14:34:57  =========================================== 1份：[3, 4, 5] ==========================================
20220309-14:34:57  =========================================== 2份：[6, 7] ==========================================
20220309-14:34:57  =========================================== 3份：[8, 9] ==========================================
20220309-14:35:00  修改Info，用于分批预测
20220309-14:35:00  condition: right(user_id::text, 1) in ('8', '9')
                   table_predict:./binaryclassify/eg//predictscore~202101/predict_data~202101~3.csv
                   table_score:./binaryclassify/eg//predictscore~202101/predict_score_data~202011~202012~202101~3.csv
20220309-14:35:00  模型示例_3_[8, 9]
                   Out[8]: 20220309-14:35:24  'succeed'
                   Out[11]: 20220309-14:36:27  'succeed'
                   Out[12]: 20220309-14:36:49  'succeed'
20220309-14:37:55  模型示例_3_[8, 9]
                   Out[16]: 20220309-14:38:36  'tab_explore_create: hdhgdd'
20220309-14:39:14  模型示例_3_[8, 9]
                   Out[23]: Exception('hdhgdd')
                   Out[24]: Exception
                   Out[25]: 20220309-14:39:43  True
                   Out[27]: Exception('hdhgdd')
20220309-14:41:59  pid: 45268
20220309-14:42:15  job_name: 模型示例_3_[8, 9]
20220309-14:42:18  pid: 45268
20220309-14:44:09  job_name: 模型示例_阶段3_拆分条件[8, 9]
20220309-14:44:26  job_name: 模型示例；阶段3；拆分条件[8, 9]
20220309-14:46:14  日志文件：./binaryclassify/eg//predictscore~202101/log/eg_forecast~202101~20220309144614.txt
20220309-14:46:14  20220309-14:46:14  加载训练结果：./binaryclassify/eg/traintest~202011~202012/train_result~202011~202012.pkl
20220309-14:46:14  20220309-14:46:14  从训练结果中获取Info,并加入预测所需信息

20220309-14:46:14  20220309-14:46:14  condition中涉及日数据，接下来的预测过程不得不暂时忽略日数据条件
20220309-14:46:14  20220309-14:46:14  务必通知清单输出人员在输出清单时补充这些条件
20220309-14:46:14  20220309-14:46:14  确认忽略日数据条件，不会造成数据量的异常突增
20220309-14:46:14  20220309-14:46:14  检查剔除前后的逻辑确保可通过在清单输出时补充日数据条件以得到预期用户范围的清单

20220309-14:46:14  20220309-14:46:14  --- table_day从ml.ml_feature_info_yw_user_day,  acct_day, 1, 15修改为np.nan
20220309-14:46:14  20220309-14:46:14  --- 剔除condition_base中的日数据条件
                                      原始：
                                      
                                          phone_no_null is null and
                                          dayvalue_phone_no_null is null and
                                          last_stop_date is not null and
                                          innet_months >= 3
                                      剔除后：
                                      phone_no_null is null and
                                       last_stop_date is not null and
                                       innet_months >= 3

20220309-14:46:14  20220309-14:46:14  --- 剔除condition中的日数据条件
                                      原始：
                                      dayvalue_user_status='在网-正常' and 
                                          phone_no_null is null and
                                          dayvalue_phone_no_null is null and
                                          last_stop_date is not null and
                                          innet_months >= 3
                                      剔除后：
                                      phone_no_null is null and
                                       last_stop_date is not null and
                                       innet_months >= 3


                                      ###################################################################### 加工预测账期近n月基础数据
                                       


20220309-14:46:14  20220309-14:46:14  将数据拆分成 4 份分别预测

20220309-14:46:14  20220309-14:46:14  =========================================== 0份：[0, 1, 2] ==========================================
20220309-14:46:14  20220309-14:46:14  修改Info，用于分批预测
20220309-14:46:14  20220309-14:46:14  condition: right(user_id::text, 1) in ('0', '1', '2')
                                      table_predict:./binaryclassify/eg//predictscore~202101/predict_data~202101~0.csv
                                      table_score:./binaryclassify/eg//predictscore~202101/predict_score_data~202011~202012~202101~0.csv
20220309-14:46:28  20220309-14:46:28  ==========================================================================================

20220309-14:46:28  20220309-14:46:28  =========================================== 1份：[3, 4, 5] ==========================================
20220309-14:46:28  20220309-14:46:28  修改Info，用于分批预测
20220309-14:46:28  20220309-14:46:28  condition: right(user_id::text, 1) in ('3', '4', '5')
                                      table_predict:./binaryclassify/eg//predictscore~202101/predict_data~202101~1.csv
                                      table_score:./binaryclassify/eg//predictscore~202101/predict_score_data~202011~202012~202101~1.csv
20220309-14:46:41  20220309-14:46:41  ==========================================================================================

20220309-14:46:41  20220309-14:46:41  =========================================== 2份：[6, 7] ==========================================
20220309-14:46:41  20220309-14:46:41  修改Info，用于分批预测
20220309-14:46:41  20220309-14:46:41  condition: right(user_id::text, 1) in ('6', '7')
                                      table_predict:./binaryclassify/eg//predictscore~202101/predict_data~202101~2.csv
                                      table_score:./binaryclassify/eg//predictscore~202101/predict_score_data~202011~202012~202101~2.csv
20220309-14:46:53  20220309-14:46:53  ==========================================================================================

20220309-14:46:53  20220309-14:46:53  =========================================== 3份：[8, 9] ==========================================
20220309-14:46:53  20220309-14:46:53  修改Info，用于分批预测
20220309-14:46:53  20220309-14:46:53  condition: right(user_id::text, 1) in ('8', '9')
                                      table_predict:./binaryclassify/eg//predictscore~202101/predict_data~202101~3.csv
                                      table_score:./binaryclassify/eg//predictscore~202101/predict_score_data~202011~202012~202101~3.csv
20220309-14:47:04  20220309-14:47:04  ==========================================================================================

20220309-14:47:18  20220309-14:47:18  合并4个批次的分数结果
20220309-14:47:18  20220309-14:47:18      0: (4763, 23)
20220309-14:47:18  20220309-14:47:18      1: (4198, 23)
20220309-14:47:18  20220309-14:47:18      2: (3146, 23)
20220309-14:47:18  20220309-14:47:18      3: (3193, 23)
20220309-14:47:18  20220309-14:47:18  分数数据合计shape: (15300, 23)

20220309-14:47:18  20220309-14:47:18  进行分数排名与划分档位
20220309-14:47:18  20220309-14:47:18  分数档位概览：
                                          100    153
                                          99    153
                                          98    153
                                          97    153
                                          96    153
                                          95    153
                                          94    153
                                          93    153
                                          92    153
                                          91    153
                                          90    153
                                          89    153
                                          88    153
                                          87    153
                                          86    153
                                          85    153
                                          84    153
                                          83    153
                                          82    153
                                          81    153
                                          80    153
                                          79    153
                                          78    153
                                          77    153
                                          76    153
                                          75    153
                                          74    153
                                          73    153
                                          72    153
                                          71    153
                                          70    153
                                          69    153
                                          68    153
                                          67    153
                                          66    153
                                          65    153
                                          64    153
                                          63    153
                                          62    153
                                          61    153
                                          60    153
                                          59    153
                                          58    153
                                          57    153
                                          56    153
                                          55    153
                                          54    153
                                          53    153
                                          52    153
                                          51    153
                                          50    153
                                          49    153
                                          48    153
                                          47    153
                                          46    153
                                          45    153
                                          44    153
                                          43    153
                                          42    153
                                          41    153
                                          40    153
                                          39    153
                                          38    153
                                          37    153
                                          36    153
                                          35    153
                                          34    153
                                          33    153
                                          32    153
                                          31    153
                                          30    153
                                          29    153
                                          28    153
                                          27    153
                                          26    153
                                          25    153
                                          24    153
                                          23    153
                                          22    153
                                          21    153
                                          20    153
                                          19    153
                                          18    153
                                          17    153
                                          16    153
                                          15    153
                                          14    153
                                          13    153
                                          12    153
                                          11    153
                                          10    153
                                          9    153
                                          8    153
                                          7    153
                                          6    153
                                          5    153
                                          4    153
                                          3    153
                                          2    153
                                          1    153
                                          dtype: int64

20220309-14:47:18  20220309-14:47:18  保存结果数据至：./binaryclassify/eg//predictscore~202101/predict_score_data~202011~202012~202101.csv